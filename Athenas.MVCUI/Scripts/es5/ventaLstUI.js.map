{"version":3,"sources":["../es6/venta/ventaLstUI.js"],"names":["VentaUI","getFiltros","arrFiltros","AthenasNet","Mant","generarTabla","lstVentas","$","SEL_TBL_MANT","DataTable","clear","destroy","data","filas","elimina","iniCodigo","compilaTemplate","ID_TEMP_TBL_BODY","SEL_TBL_BODY","setCliente","cliente","inNombre","document","getElementById","inDni","inTelefono","value","Nombre","Dni","Telefono","setProducto","producto","inCodigo","inDescripcion","inPrecio","inStock","inDesc","Codigo","Descripcion","PrecioVenta","StockActual","Descuento","getBtnBuscarCliente","getBtnBuscarProducto","getBtnAgregarDet","getInputCantidad","getFormVenta","setSubTotal","subtotal","setDescuento","descuento","setTotal","total","getModalBuscar","getModalContentBuscar","querySelector","getTblModalBuscar","getTblDetalle","setModalBuscarData","setDetalleData","abreModalVenta","modal","setModalVentaData","venta","setModalVentaDetData","validaEnvioVenta","esValido","classList","add","remove","validaCliSeleccionado","validaProdSeleccionado","validaCantidadDetalle","validaDetalle","window","addEventListener","tempDetVentaTbl","Handlebars","registerPartial","innerHTML"],"mappings":"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","sourcesContent":["const VentaUI = () => {\r\n    //Para el listado\r\n    const getFiltros = () => {\r\n        const arrFiltros = ['Cliente'];\r\n\r\n        return AthenasNet.Mant.getFiltros(arrFiltros);\r\n\r\n    }\r\n\r\n    const generarTabla = (lstVentas) => {\r\n        $(AthenasNet.Mant.SEL_TBL_MANT).DataTable().clear().destroy();\r\n        const data = {\r\n            filas: lstVentas,\r\n            elimina: true,\r\n            iniCodigo: 'VEN'\r\n        }\r\n\r\n        AthenasNet.compilaTemplate(AthenasNet.ID_TEMP_TBL_BODY, data, AthenasNet.Mant.SEL_TBL_BODY);\r\n        $(AthenasNet.Mant.SEL_TBL_MANT).DataTable();\r\n    }\r\n\r\n \r\n    //Para el registro\r\n\r\n    const setCliente = (cliente) => {\r\n\r\n        const inNombre = document.getElementById('Cliente.Nombre');\r\n        const inDni = document.getElementById('Cliente.Dni');\r\n        const inTelefono = document.getElementById('Cliente.Telefono');\r\n\r\n        inNombre.value = cliente.Nombre;\r\n        inDni.value = cliente.Dni;\r\n        inTelefono.value = cliente.Telefono;\r\n    }\r\n\r\n    const setProducto = (producto) => {\r\n\r\n        const inCodigo = document.getElementById('Producto.Codigo');\r\n        const inDescripcion = document.getElementById('Producto.Descripcion');\r\n        const inPrecio = document.getElementById('Producto.PrecioVenta');\r\n        const inStock = document.getElementById('Producto.StockActual');\r\n        const inDesc = document.getElementById('Producto.Descuento');\r\n\r\n        inCodigo.value = producto.Codigo;\r\n        inDescripcion.value = producto.Descripcion;\r\n        inPrecio.value = producto.PrecioVenta;\r\n        inStock.value = producto.StockActual;\r\n        inDesc.value = producto.Descuento;\r\n\r\n    }\r\n\r\n    const getBtnBuscarCliente = () => document.getElementById('btn-buscar-cliente');\r\n\r\n    const getBtnBuscarProducto = () => document.getElementById('btn-buscar-producto');\r\n\r\n    const getBtnAgregarDet = () => document.getElementById('btn-agregar-detalle');\r\n\r\n    const getInputCantidad = () => document.getElementById('Producto.Cantidad');\r\n\r\n    const getFormVenta = () => document.getElementById('form-venta');\r\n\r\n    const setSubTotal = (subtotal) => document.getElementById('txt-subtotal').value = subtotal;\r\n\r\n    const setDescuento = (descuento) => document.getElementById('txt-descuento').value = descuento;\r\n\r\n    const setTotal = (total) => document.getElementById('txt-total').value = total;\r\n\r\n    const getModalBuscar = () => $('#modalBuscar');\r\n\r\n    const getModalContentBuscar = () => document.querySelector('#modalBuscar .modal-content');\r\n\r\n    const getTblModalBuscar = () => document.getElementById('tbl-modal-buscar');\r\n\r\n    const getTblDetalle = () => document.getElementById('tb-detalle');\r\n\r\n    const setModalBuscarData = (data) => {\r\n        AthenasNet.compilaTemplate('tempModalBuscar', data, '#modalBuscar .modal-content')\r\n    }\r\n\r\n    const setDetalleData = (data) => {\r\n        AthenasNet.compilaTemplate('tempDetalle', data, '#tb-detalle #det-body')\r\n    }\r\n\r\n    const abreModalVenta = () => {\r\n        $('#modalDetVenta').modal('show');\r\n    }\r\n\r\n    const setModalVentaData = (venta) => {\r\n        AthenasNet.compilaTemplate('tempModalVentaBody', venta, '#modalDetVenta .modal-body')\r\n    }\r\n\r\n    const setModalVentaDetData = (venta) => {\r\n        AthenasNet.compilaTemplate('tempDetVentaTbl', venta, '#modalDetVenta .modal-body #det-body')\r\n    }\r\n\r\n    const validaEnvioVenta = (esValido) => {\r\n        if (!esValido) {\r\n            getFormVenta().classList.add('was-validated')\r\n        }\r\n        else {\r\n            getFormVenta().classList.remove('was-validated')\r\n        }\r\n    }\r\n\r\n    const validaCliSeleccionado = (esValido) => {\r\n\r\n        if (!esValido) {\r\n            document.getElementById('Cliente.Nombre').classList.add('is-invalid')\r\n        }\r\n        else {\r\n            document.getElementById('Cliente.Nombre').classList.remove('is-invalid')\r\n        }\r\n\r\n    }\r\n\r\n    const validaProdSeleccionado = (esValido) => {\r\n        debugger\r\n        if (!esValido) {\r\n            document.getElementById('Producto.Codigo').classList.add('is-invalid')\r\n        }\r\n        else {\r\n            document.getElementById('Producto.Codigo').classList.remove('is-invalid')\r\n        }\r\n\r\n    }\r\n\r\n    const validaCantidadDetalle = (esValido) => {\r\n\r\n        if (!esValido) {\r\n            document.getElementById('Producto.Cantidad').classList.add('is-invalid');\r\n        }\r\n        else {\r\n            document.getElementById('Producto.Cantidad').classList.remove('is-invalid');\r\n        }\r\n\r\n    }\r\n\r\n    const validaDetalle = (esValido) => {\r\n\r\n        if (!esValido) {\r\n            document.getElementById('msj-error').classList.remove('d-none');\r\n        }\r\n        else {\r\n            document.getElementById('msj-error').classList.add('d-none');\r\n        }\r\n\r\n    }\r\n\r\n    return {\r\n        generarTabla,\r\n        getFiltros,\r\n        setCliente,\r\n        setProducto,\r\n        getBtnBuscarCliente,\r\n        getBtnBuscarProducto,\r\n        getModalBuscar,\r\n        setModalBuscarData,\r\n        setDetalleData,\r\n        getBtnAgregarDet,\r\n        getTblModalBuscar,\r\n        getModalContentBuscar,\r\n        getInputCantidad,\r\n        setSubTotal,\r\n        setDescuento,\r\n        setTotal,\r\n        getTblDetalle,\r\n        getFormVenta,\r\n        abreModalVenta,\r\n        setModalVentaData,\r\n        validaEnvioVenta,\r\n        validaCliSeleccionado,\r\n        validaProdSeleccionado,\r\n        validaCantidadDetalle,\r\n        validaDetalle\r\n    }\r\n}\r\n\r\nwindow.addEventListener('load', () => {\r\n\r\n    const tempDetVentaTbl = document.getElementById('tempDetVentaTbl');\r\n\r\n    if (tempDetVentaTbl) {\r\n\r\n        Handlebars.registerPartial('tblDetVenta', tempDetVentaTbl.innerHTML);\r\n    }\r\n    \r\n\r\n})"],"file":"ventaLstUI.js"}
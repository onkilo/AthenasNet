{"version":3,"sources":["../es6/athenasNet.js"],"names":["MVC_URL_BASE","ACCION_MOSTRAR_SPINNER","ACCION_OCULTAR_SPINNER","ACCION_MOSTRAR_TOAST","ACCION_OCULTAR_TOAST","ID_MAIN_FORM","llamadaApi","opciones","opcionsDefecto","beforeSend","manejaSpinner","contentType","data","type","$","ajax","url","respuesta","Codigo","estado","spinner","document","querySelector","style","display","muestraToast","className","mensaje","titulo","TOAST_ID","TOAST_ID_MSJ","TOAST_ID_TITULO","toast","toastMsjBody","toastMsjTitle","innerHTML","classes","push","join","compilaTemplate","idTemplate","idContenedor","compilacion","Handlebars","compile","getElementById","compConData","getMainForm","getFormElements","elements","getFormEleValue","ele","value","setFormEleValue","getEntidad","arrCampos","conId","conAccion","formElements","entidad","forEach","fil","Id","accion","setEntidad","Object","keys","key","limpiarMainForm","resetId","resetAccion","reset","cerrarModalMainform","modal","window","AthenasNet","addEventListener","extend","fn","dataTable","defaults"],"mappings":"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","sourcesContent":["(function () {\r\n\r\n    const MVC_URL_BASE = 'http://localhost:62622/';\r\n    const ACCION_MOSTRAR_SPINNER = 'mostrar';\r\n    const ACCION_OCULTAR_SPINNER = 'ocultar';\r\n\r\n    const ACCION_MOSTRAR_TOAST = 'mostrar';\r\n    const ACCION_OCULTAR_TOAST = 'ocultar';\r\n\r\n    const ID_MAIN_FORM = 'main-form';\r\n\r\n\r\n    const llamadaApi = async (opciones) => {\r\n\r\n        const opcionsDefecto = {\r\n            beforeSend: function () {\r\n                manejaSpinner(ACCION_MOSTRAR_SPINNER);\r\n            },\r\n            contentType: 'application/json',\r\n            data: {},\r\n            type: 'GET'\r\n        };\r\n        \r\n        \r\n        try {\r\n            const respuesta = await $.ajax({\r\n                ...opcionsDefecto,\r\n                ...opciones,\r\n                url: MVC_URL_BASE + opciones.url\r\n            });\r\n\r\n            if (respuesta.Codigo !== 200) {\r\n                throw respuesta;\r\n            }\r\n\r\n            return respuesta;\r\n        }\r\n        catch (err) {\r\n            throw err;\r\n        }\r\n        finally {\r\n            //ocultar spinner\r\n            manejaSpinner(ACCION_OCULTAR_SPINNER);\r\n        }\r\n\r\n    }\r\n\r\n    const manejaSpinner = (estado) => {\r\n\r\n        const spinner = document.querySelector('.spinner-container');\r\n\r\n        if (estado === 'mostrar') spinner.style.display = 'flex';\r\n        else spinner.style.display = 'none';\r\n    }\r\n\r\n\r\n    const muestraToast = ({ className = 'bg-success', mensaje = 'Operación realizada con éxito', titulo = 'Éxito' }) => {\r\n        const TOAST_ID = '#general-toast';\r\n        const TOAST_ID_MSJ = '#toast-mensaje';\r\n        const TOAST_ID_TITULO = '#toast-titulo';\r\n\r\n        const toast = document.querySelector(TOAST_ID);\r\n\r\n        const toastMsjBody = document.querySelector(TOAST_ID_MSJ);\r\n        const toastMsjTitle = document.querySelector(TOAST_ID_TITULO);\r\n\r\n        toastMsjBody.innerHTML = mensaje\r\n        toastMsjTitle.innerHTML = titulo;\r\n\r\n        const classes = ['toast', 'mt-2']\r\n\r\n        classes.push(className);\r\n\r\n        toast.className = classes.join(' ');\r\n\r\n        $(TOAST_ID).toast('show');\r\n    }\r\n\r\n    const compilaTemplate = (idTemplate, data, idContenedor) => {\r\n        const compilacion = Handlebars.compile(document.getElementById(idTemplate).innerHTML);\r\n        const compConData = compilacion(data);\r\n        document.querySelector(idContenedor).innerHTML = compConData;\r\n    }\r\n\r\n    const getMainForm = () => document.getElementById(ID_MAIN_FORM);\r\n\r\n    const getFormElements = () => getMainForm().elements;\r\n\r\n    const getFormEleValue = (ele) => getFormElements()[ele].value;\r\n\r\n    const setFormEleValue = (ele, value) => { getFormElements()[ele].value = value; }\r\n\r\n    const getEntidad = (arrCampos = [], conId = true, conAccion = true) => {\r\n\r\n        const formElements = getFormElements();\r\n\r\n        let entidad = {};\r\n\r\n        arrCampos.forEach(fil => {\r\n            entidad = {\r\n                ...entidad,\r\n                [fil]: formElements[fil].value\r\n            }\r\n        });\r\n\r\n        if (conId) entidad.Id = formElements['Id'].value;\r\n\r\n        if (conAccion) entidad.accion = formElements['accion'].value;\r\n\r\n        return entidad;\r\n    }\r\n\r\n    const setEntidad = (entidad = {}) => {\r\n        const formElements = getFormElements();\r\n        Object.keys(entidad).forEach(key => {\r\n            formElements[key].value = entidad[key];\r\n        })\r\n    }\r\n\r\n    const limpiarMainForm = (resetId = 0, resetAccion = 'registrar') => {\r\n        getMainForm().reset();\r\n        setFormEleValue('Id', resetId);\r\n        setFormEleValue('accion', resetAccion);\r\n    }\r\n\r\n    const cerrarModalMainform = () => {\r\n        $('#modal-main-form').modal('hide');\r\n    }\r\n\r\n    window.AthenasNet = {\r\n        llamadaApi,\r\n        manejaSpinner,\r\n        muestraToast,\r\n        compilaTemplate,\r\n        getEntidad,\r\n        getFormEleValue,\r\n        setFormEleValue,\r\n        limpiarMainForm,\r\n        cerrarModalMainform,\r\n        setEntidad\r\n    };\r\n})()\r\n\r\n\r\nwindow.addEventListener('load', () => {\r\n    $.extend(true, $.fn.dataTable.defaults, {\r\n        \"searching\": false,\r\n        \"ordering\": false,\r\n        \"lengthChange\": false,\r\n        \"language\": {\r\n            \"info\": \"Mostrando página _PAGE_ de _PAGES_\",\r\n            \"paginate\": {\r\n                \"next\": \"Siguiente\",\r\n                \"previous\": \"Anterior\"\r\n            }\r\n        }\r\n    });\r\n    $('#general-toast').toast();\r\n})\r\n\r\n"],"file":"athenasNet.js"}
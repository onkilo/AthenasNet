{"version":3,"sources":["../es6/proveedor/proveedorController.js"],"names":["ProveedorController","service","ui","lstProveedores","proveSeleccionado","AthenasNet","Mant","muestraProveedores","filtros","listarProveedor","generarTabla","map","c","Id","RzSocial","RUC","Representante","Email","Telefono","Direccion","console","error","manejaEvtTabla","getTblMantenedor","addEventListener","evt","target","dataset","id","accion","find","parseInt","setFormMantenedor","log","mostrarConfirmacion","manejaEnvioProve","formMantenedor","getFormMantenedor","preventDefault","checkValidity","proveedor","getProveedor","crearProveedor","cerrarModMant","muestraToast","mensaje","titulo","actualizarProveedor","cssClass","esFormularioValido","manejaEnvioConf","getFormConfirmar","eliminarProveedor","ocultarConfirmacion","manejaEnvioFiltro","getFormFiltrar","getFiltros","iniciar","evtMostrarModMant"],"mappings":"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","sourcesContent":["﻿const ProveedorController = (service, ui) => {\r\n    let lstProveedores = [];\r\n    let proveSeleccionado = {};\r\n    const { Mant } = AthenasNet;\r\n\r\n    const muestraProveedores = async (filtros = {}) => {\r\n        try {\r\n            lstProveedores = await service.listarProveedor(filtros);\r\n            ui.generarTabla(lstProveedores.map(c => ({\r\n                Id: c.Id,\r\n                RzSocial: c.RzSocial,\r\n                RUC: c.RUC,\r\n                Representante: c.Representante,\r\n                Email: c.Email,\r\n                Telefono: c.Telefono,\r\n                Direccion: c.Direccion\r\n            })));\r\n        }\r\n        catch (err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    const manejaEvtTabla = () => {\r\n        Mant.getTblMantenedor().addEventListener('click', (evt) => {\r\n\r\n            if (evt.target.dataset.id) {\r\n                const { id, accion } = evt.target.dataset;\r\n\r\n                proveSeleccionado = lstProveedores.find(c => c.Id === parseInt(id));\r\n                proveSeleccionado.accion = accion;\r\n\r\n                if (accion === 'editar') {\r\n                    Mant.setFormMantenedor(proveSeleccionado, ['Activo']);\r\n                }\r\n                else if (accion === 'eliminar') {\r\n                    console.log('eliminar')\r\n                    AthenasNet.mostrarConfirmacion();\r\n                }\r\n            }\r\n\r\n\r\n        });\r\n    }\r\n\r\n\r\n    const manejaEnvioProve = () => {\r\n\r\n        const formMantenedor = Mant.getFormMantenedor();\r\n        formMantenedor.addEventListener('submit', async (evt) => {\r\n            evt.preventDefault();\r\n            if (formMantenedor.checkValidity()) {\r\n\r\n                const proveedor = ui.getProveedor();\r\n\r\n            try {\r\n                if (proveedor.accion === 'registrar') {\r\n                    await service.crearProveedor(proveedor);\r\n                    Mant.cerrarModMant();\r\n                    AthenasNet.muestraToast({ mensaje: 'El proveedor se registró satisfactoriamente', titulo: 'Registro exitoso' })\r\n                }\r\n                else if (proveedor.accion === 'editar') {\r\n                    await service.actualizarProveedor(proveedor);\r\n                    Mant.cerrarModMant();\r\n                    AthenasNet.muestraToast({ mensaje: 'El proveedor se actualizó satisfactoriamente', titulo: 'Actualización exitosa' })\r\n                }\r\n                await muestraProveedores();\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n                const mensaje = (proveedor.accion === 'registrar') ? 'Hubo un error en el registro' : 'Hubo un error en la actualización';\r\n                const titulo = (proveedor.accion === 'registrar') ? 'Registro erróneo' : 'Actualización errónea';\r\n                AthenasNet.muestraToast({ cssClass: 'bg-danger', mensaje: mensaje, titulo: titulo })\r\n            }\r\n\r\n            }\r\n            else {\r\n                Mant.esFormularioValido(false);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n    const manejaEnvioConf = () => {\r\n        AthenasNet.getFormConfirmar().addEventListener('submit', async (evt) => {\r\n            evt.preventDefault();//evitar la accion del evento\r\n            try {\r\n                await service.eliminarProveedor(parseInt(proveSeleccionado.Id));\r\n                AthenasNet.ocultarConfirmacion();\r\n                AthenasNet.muestraToast({ mensaje: 'El proveedor fue eliminado satisfactoriamente', titulo: 'Eliminación exitosa' })\r\n                await muestraProveedores();\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n                AthenasNet.muestraToast({ cssClass: 'bg-danger', mensaje: 'Hubo un error en la eliminación', titulo: 'Eliminación errónea' })\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    const manejaEnvioFiltro = () => {\r\n        Mant.getFormFiltrar().addEventListener('submit', async (evt) => {\r\n            evt.preventDefault();//evitar la accion del evento\r\n            const filtros = ui.getFiltros();\r\n            await muestraProveedores(filtros);\r\n        })\r\n    }\r\n\r\n    const iniciar = () => {\r\n        muestraProveedores();\r\n        Mant.evtMostrarModMant();\r\n        manejaEvtTabla();\r\n        manejaEnvioProve();\r\n        manejaEnvioConf();\r\n        manejaEnvioFiltro();\r\n    }\r\n\r\n\r\n    return {\r\n        iniciar\r\n    }\r\n}"],"file":"proveedorController.js"}
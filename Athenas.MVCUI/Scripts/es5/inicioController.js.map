{"version":3,"sources":["../es6/inicio/inicioController.js"],"names":["InicioController","usuarioService","ui","infoPrincipal","rolesActuales","muestraInfoPrincipal","setCantidades","setProdBajoStockData","filas","ProdBajoStock","setPromoActualData","PromosActuales","map","promo","Producto","Descripcion","Descuento","Tipo","AthenasNet","formatPrecio","Valor","toFixed","console","log","validacionUI","length","Nombre","muestraVendedor","getRolesActuales","error","iniciar"],"mappings":";;;;;;AAAA,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,cAAD,EAAiBC,EAAjB,EAAwB;AAE7C,MAAIC,aAAa,GAAG,EAApB;AACA,MAAIC,aAAa,GAAG,EAApB;;AAEA,MAAMC,oBAAoB;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACHJ,cAAc,CAACE,aAAf,EADG;;AAAA;AACzBA,cAAAA,aADyB;AAGzBD,cAAAA,EAAE,CAACI,aAAH,CAAiBH,aAAjB;AAEAD,cAAAA,EAAE,CAACK,oBAAH,CAAwB;AACpBC,gBAAAA,KAAK,EAAEL,aAAa,CAACM;AADD,eAAxB;AAIAP,cAAAA,EAAE,CAACQ,kBAAH,CAAsB;AAClBF,gBAAAA,KAAK,EAAEL,aAAa,CAACQ,cAAd,CAA6BC,GAA7B,CAAiC,UAAAC,KAAK,EAAI;AAE7C,yBAAO;AACHC,oBAAAA,QAAQ,EAAE;AACNC,sBAAAA,WAAW,EAAEF,KAAK,CAACC,QAAN,CAAeC;AADtB,qBADP;AAIHC,oBAAAA,SAAS,EAAGH,KAAK,CAACI,IAAN,KAAe,CAAhB,GAAqBC,UAAU,CAACC,YAAX,CAAwBN,KAAK,CAACO,KAA9B,CAArB,eAAiEP,KAAK,CAACO,KAAN,CAAYC,OAAZ,CAAoB,CAApB,CAAjE;AAJR,mBAAP;AAOH,iBATM;AADW,eAAtB;AAcAC,cAAAA,OAAO,CAACC,GAAR,CAAYpB,aAAZ;;AAvByB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAApBE,oBAAoB;AAAA;AAAA;AAAA,KAA1B;;AA0BA,MAAMmB,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvB,QAAIpB,aAAa,CAACqB,MAAd,KAAyB,CAAzB,IAA8BrB,aAAa,CAAC,CAAD,CAAb,CAAiBsB,MAAjB,KAA4B,UAA9D,EAA0E;AACtExB,MAAAA,EAAE,CAACyB,eAAH;AACH;AAEJ,GALD;;AAOA,MAAMC,gBAAgB;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEK3B,cAAc,CAACG,aAAf,EAFL;;AAAA;AAEjBA,cAAAA,aAFiB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAKjBkB,cAAAA,OAAO,CAACO,KAAR;;AALiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAhBD,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AASA,MAAME,OAAO;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACNF,gBAAgB,EADV;;AAAA;AAAA;AAAA,qBAENvB,oBAAoB,EAFd;;AAAA;AAGZmB,cAAAA,YAAY;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPM,OAAO;AAAA;AAAA;AAAA,KAAb;;AAMA,SAAO;AACHA,IAAAA,OAAO,EAAPA;AADG,GAAP;AAGH,CAxDD","sourcesContent":["const InicioController = (usuarioService, ui) => {\r\n\r\n    let infoPrincipal = {};\r\n    let rolesActuales = [];\r\n\r\n    const muestraInfoPrincipal = async () => {\r\n        infoPrincipal = await usuarioService.infoPrincipal();\r\n\r\n        ui.setCantidades(infoPrincipal)\r\n\r\n        ui.setProdBajoStockData({\r\n            filas: infoPrincipal.ProdBajoStock\r\n        })\r\n\r\n        ui.setPromoActualData({\r\n            filas: infoPrincipal.PromosActuales.map(promo => {\r\n\r\n                return {\r\n                    Producto: {\r\n                        Descripcion: promo.Producto.Descripcion\r\n                    },\r\n                    Descuento: (promo.Tipo === 0) ? AthenasNet.formatPrecio(promo.Valor) : `% ${promo.Valor.toFixed(2)}`\r\n\r\n                }\r\n            })\r\n\r\n        })\r\n\r\n        console.log(infoPrincipal);\r\n    }\r\n\r\n    const validacionUI = () => {\r\n        if (rolesActuales.length === 1 && rolesActuales[0].Nombre === 'Vendedor') {\r\n            ui.muestraVendedor();\r\n        }\r\n        \r\n    }\r\n\r\n    const getRolesActuales = async () => {\r\n        try {\r\n            rolesActuales = await usuarioService.rolesActuales();\r\n        }\r\n        catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    const iniciar = async () => {\r\n        await getRolesActuales();\r\n        await muestraInfoPrincipal();\r\n        validacionUI();\r\n    }\r\n\r\n    return {\r\n        iniciar\r\n    }\r\n}"],"file":"inicioController.js"}